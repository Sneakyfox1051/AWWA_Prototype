<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Families Dashboard Login</title>
    <!-- Tailwind CSS CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome for icons -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <!-- Google Fonts for typography -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Jaini+Purva&family=Noto+Sans+Devanagari:wght@400;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="login.css">
    <!-- Custom Styles to integrate Google Fonts -->
    <style>
      body {
        font-family: "Inter", sans-serif;
        background-color: #f8f9fa; /* Lighter background from image */
      }
      .font-noto-devanagari {
        font-family: "Noto Sans Devanagari", sans-serif;
        font-weight: 900; /* Bolder font weight to match image */
      }
      .font-jaini-purva {
        font-family: "Jaini Purva", cursive;
      }
      /* Custom styling to hide the default dropdown arrow */
      select {
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        background-image: none;
      }
      .select-arrow {
        pointer-events: none; /* Allows clicks to pass through to the select element */
      }
    </style>
  </head>
  <body
    class="flex items-center justify-center min-h-screen p-2 sm:p-3 md:p-4 pt-6 sm:pt-8 md:pt-12"
  >
    <!-- Top-left header with organization logo -->
    <header class="site-header">
      <img src="public/Awwa2-logo.png" alt="AWWA" class="header-logo">
  </header>

    <main
      class="w-full max-w-xs sm:max-w-sm md:max-w-2xl lg:max-w-3xl min-h-[400px] sm:min-h-[450px] md:min-h-[500px]"
    >
      <div
        class="bg-white rounded-2xl shadow-2xl flex flex-col md:flex-row overflow-hidden"
      >
        <!-- Left Column - Image Section (hidden on mobile) -->
        <div
          class="hidden md:block md:w-1/2 bg-[#a7c5f3] p-0 flex flex-col justify-center items-center relative overflow-hidden"
        >
          <img
            src="public/Untitled design (26).png"
            alt="AWWA Logo"
            class="w-full h-full object-cover"
          />
        </div>

        <!-- Right Column - Login Form Section -->
        <div
          class="w-full md:w-1/2 p-3 sm:p-4 md:p-6 lg:p-8 flex flex-col justify-center"
        >
          <div class="w-full max-w-md mx-auto">
            <!-- Form Header -->
            <div class="text-center mb-6 sm:mb-8">
              <div class="mb-4 sm:mb-6">
                <span
                  class="inline-block bg-orange-500 text-white text-xs sm:text-sm font-bold px-4 sm:px-6 py-2 sm:py-3 rounded-full uppercase tracking-wider shadow-md"
                  >PROJECT</span
                >
              </div>
              <div class="hindi-hero">
                <div class="hindi-title">दीप <img src="public/Untitled design (25).png" alt="दीप" class="diya-icon"></div>
                <div class="hindi-sub">☼ जागरूकता से आत्मनिर्भरता ☼</div>
            </div>
              <p class="text-gray-400 text-sm sm:text-base">
                Please sign in to continue
              </p>
            </div>

            <!-- Login Form -->
            <form class="login-form space-y-4 sm:space-y-5">
              <!-- User ID Input -->
              <div class="form-group">
                <label
                  for="userId"
                  class="block text-sm font-medium text-gray-700 mb-1"
                  >User ID</label
                >
                <div class="relative">
                  <i
                    class="fas fa-user absolute left-3 sm:left-4 top-1/2 -translate-y-1/2 text-gray-400 text-sm sm:text-base"
                  ></i>
                  <input
                    type="text"
                    id="userId"
                    name="userId"
                    value="tarunpreet singh"
                    required
                    class="w-full py-2 sm:py-3 px-3 sm:px-4 pl-10 sm:pl-12 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400 transition-shadow text-sm sm:text-base"
                    placeholder="Enter your User ID"
                  />
                </div>
              </div>

              <!-- Password Input -->
              <div class="form-group">
                <label
                  for="password"
                  class="block text-sm font-medium text-gray-700 mb-1"
                  >Password</label
                >
                <div class="relative">
                  <i
                    class="fas fa-lock absolute left-3 sm:left-4 top-1/2 -translate-y-1/2 text-gray-400 text-sm sm:text-base"
                  ></i>
                  <input
                    type="password"
                    id="password"
                    name="password"
                    value="admin123"
                    required
                    class="w-full py-2 sm:py-3 px-3 sm:px-4 pl-10 sm:pl-12 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400 transition-shadow text-sm sm:text-base"
                    placeholder="Enter your password"
                  />
                </div>
              </div>

              <!-- User Type Dropdown -->
              <div class="form-group">
                <label
                  for="userType"
                  class="block text-sm font-medium text-gray-700 mb-1"
                  >User Type</label
                >
                <div class="relative">
                  <i
                    class="fas fa-shield-alt absolute left-3 sm:left-4 top-1/2 -translate-y-1/2 text-gray-400 text-sm sm:text-base"
                  ></i>
                  <select
                    id="userType"
                    name="userType"
                    required
                    class="w-full py-2 sm:py-3 px-3 sm:px-4 pl-10 sm:pl-12 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400 transition-shadow text-sm sm:text-base"
                  >
                    <option value="" disabled>Select your role</option>
                    <option value="L1" selected>L1 (Super User)</option>
                    <option value="L2">L2 (Family)</option>
                  </select>
                  <i
                    class="fas fa-chevron-down select-arrow absolute right-3 sm:right-4 top-1/2 -translate-y-1/2 text-gray-400 text-sm sm:text-base"
                  ></i>
                </div>
              </div>

              <!-- Sign In Button -->
              <button
                type="submit"
                class="w-full bg-gradient-to-r from-red-500 to-orange-400 text-white font-bold py-2 sm:py-3 px-4 rounded-lg hover:from-red-600 hover:to-orange-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl text-sm sm:text-base"
              >
                Sign In
              </button>
            </form>
          </div>
        </div>
      </div>
    </main>

    <!-- Custom Notification/Alert Box -->
    <div
      id="notification"
      class="fixed top-3 sm:top-5 right-3 sm:right-5 p-3 sm:p-4 rounded-lg shadow-xl text-white transition-all duration-500 transform translate-x-full opacity-0 z-50 text-sm sm:text-base"
    >
      <p id="notification-message"></p>
    </div>

    <script>
      /*
      ===========================================
      AUTHENTICATION SYSTEM
      ===========================================
      
      This script handles user authentication for the AWWA Family Management System.
      It validates user credentials and redirects to the appropriate dashboard.
      
      USER ROLES:
      - admin: Full system access (Commanding Officers, Battalion Command)
      - L1: Super User level access
      - L2: Standard user access
      - L3: Limited user access  
      - L4: Basic user access
      
      CREDENTIALS STRUCTURE:
      Each user object contains:
      - userId: Unique identifier
      - password: Authentication password
      - userType: Role level (admin, L1-L4)
      - name: Display name
      - designation: Military rank/position
      - phone: Contact number
      */
      
      // ===========================================
      // USER CREDENTIALS DATABASE
      // ===========================================
      // This array contains the 4 authorized unit ranking users for the AWWA system.
      // Each user object includes authentication data and profile information.
      // All users have L1 access level (Super User) with full system permissions.
      
      const validUsers = [
          // ===========================================
          // UNIT RANKING USERS (4 MAIN USERS ONLY)
          // ===========================================
          // These are the only authorized users of the AWWA system.
          // All other users have been removed for security and simplicity.
          
          { 
              // Commanding Officer - Highest authority in the unit
              userId: 'tarunpreet singh', 
              password: 'admin123', 
              userType: 'L1', 
              name: 'Col Tarunpreet Singh', 
              designation: 'Commanding Officer', 
              phone: '9650300475',
              hasSpouse: true,  // Only user with spouse information
              spouse: {
                  name: 'Mrs. Deepkiran Kaur',
                  email: 'deepkirankaur23@gmail.com',
                  phone: '7052615743',
                  relationship: 'Spouse'
              }
          },
          { 
              // Second in Command - Deputy to Commanding Officer
              userId: 'piyush sharma', 
              password: 'admin123', 
              userType: 'L1', 
              name: 'Lt Col Piyush Sharma', 
              designation: 'Second in Command', 
              phone: '9797719357',
              hasSpouse: false  // No spouse information available
          },
          { 
              // Adjutant - Administrative officer
              userId: 'harish kumar', 
              password: 'admin123', 
              userType: 'L1', 
              name: 'Maj Harish Kumar', 
              designation: 'Adjutant', 
              phone: '9256172418',
              hasSpouse: false  // No spouse information available
          },
          { 
              // OIC Tech Cell - Officer in Charge of Technical Cell
              userId: 'rahul t more', 
              password: 'admin123', 
              userType: 'L1', 
              name: 'Lt Col Rahul T More', 
              designation: 'OIC Tech Cell', 
              phone: '7006216984',
              hasSpouse: false  // No spouse information available
          },
          { 
              // OIC Tech Cell - Officer in Charge of Technical Cell
              userId: 'Family12', 
              password: 'family123', 
              userType: 'L2', 
              name: 'Smt Akansha Devi', 
              // designation: 'OIC Tech Cell', 
              phone: '7006216984',
              hasSpouse: false  // No spouse information available
          }
      ];

      // ===========================================
      // LOGIN FORM SUBMISSION HANDLER
      // ===========================================
      // This function handles the login form submission and validates user credentials.
      // It implements a two-tier authentication system for flexibility.
      
      document.querySelector('.login-form').addEventListener('submit', function (e) {
          // Prevent default form submission behavior
          e.preventDefault();
          
          // ===========================================
          // EXTRACT FORM DATA
          // ===========================================
          // Get user input from the login form fields
          const userId = document.getElementById('userId').value.trim();
          const password = document.getElementById('password').value;
          const userType = document.getElementById('userType').value;

          // Log login attempt for debugging purposes
          console.log('Login attempt:', { userId, password, userType });
          
          // ===========================================
          // AUTHENTICATION LOGIC
          // ===========================================
          // Strict authentication system:
          // Only allow login if userId, password, and userType all match exactly
          // This ensures proper role-based access control
          let match = validUsers.find(u => 
              u.userId === userId && 
              u.password === password && 
              u.userType === userType
          );
          
          // ===========================================
          // LOGIN SUCCESS HANDLING
          // ===========================================
          console.log('Match found:', match);
          if (match) {
              // Store complete user session information in localStorage
              // This data will be used by the dashboard to personalize the experience
              localStorage.setItem('userInfo', JSON.stringify({ 
                  userId: match.userId,           // Unique user identifier
                  name: match.name,               // Display name for welcome message
                  userType: match.userType,       // User role/access level
                  designation: match.designation, // Military rank/position
                  phone: match.phone,             // Contact number
                  hasSpouse: match.hasSpouse || false,  // Flag for spouse information display
                  spouse: match.spouse || null    // Spouse data (only for certain users)
              }));
              
              console.log('Login successful, redirecting...');
              alert('Login successful! Redirecting...');
              
              // Redirect based on user type
              if (match.userType === 'L2') {
                  // L4 users (Families) go to family.html page
                  window.location.href = 'family.html';
              } else {
                  // All other users (L1, L2, L3) go to the main dashboard
                  window.location.href = 'dashboard_super user.html';
              }
          } else {
              // ===========================================
              // LOGIN FAILURE HANDLING
              // ===========================================
              // Display helpful error message with valid credentials
              alert('Invalid credentials.\n\nAuthorized Users:\n- tarunpreet singh / admin123 / L1\n- piyush sharma / admin123 / L1\n- harish kumar / admin123 / L1\n- rahul t more / admin123 / L1\n- Family12 / family123 / L2');
          }
      });
  </script>
  </body>
</html>
